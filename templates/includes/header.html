{% macro nav_logo() %}
<div class="p-navigation__banner">
  <div class="p-navigation__tagged-logo">
    <a class="p-navigation__link" href="/">
      <div class="p-navigation__logo-tag">
        <img class="p-navigation__logo-icon" src="https://assets.ubuntu.com/v1/0a863174-MAAS+logomark+only.svg" alt="">
      </div>
      <span class="p-navigation__logo-title">Canonical MAAS</span>
    </a>
  </div>
  <a href="#navigation" class="p-navigation__toggle--open" title="menu">Menu</a>
  <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">Close menu</a>
</div>
{% endmacro %}

{% macro nav_items() %}
<nav class="p-navigation__nav" aria-label="main">
  <ul id="main-navigation" class="global-nav p-navigation__items u-clearfix">
    <li class="p-navigation__item{% if request.path.startswith('/how-it-works') %} is-selected" aria-current="page{% endif %}">
      <a class="p-navigation__link" href="/how-it-works" onclick="dataLayer.push({'event' : 'GAEvent' , 'eventCategory' : 'Main navigation'
        , 'eventAction' : 'Click' , 'eventLabel' : 'How it works' });">How it works</a>
    </li>
    <li class="p-navigation__item">
      <a class="p-navigation__link" href="/install" onclick="dataLayer.push({'event' : 'GAEvent' , 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Install' });">Install</a>
    </li>
    <li class="p-navigation__item{% if request.path.startswith('/docs') %} is-selected" aria-current="page{% endif %}">
      <a class="p-navigation__link" href="/docs" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Docs' });">Docs</a>
    </li>

    <li class="p-navigation__item--dropdown-toggle" id="learn">
      <a href="#learn-menu" aria-controls="learn-menu" class="p-navigation__link">Learn</a>
      <ul class="p-navigation__dropdown" id="learn-menu" aria-hidden="true">
        <li>
          <a class="p-navigation__dropdown-item" href="/tour" onclick="dataLayer.push({'event' : 'GAEvent' , 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Tour' });">Features</a>
        </li>
        <li>
          <a class="p-navigation__dropdown-item" href="/tutorials" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Tutorials' });">Tutorials</a>
        </li>
        <li>
          <a class="p-navigation__dropdown-item" href="/resources"
        onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Resources' });">Understand MAAS</a>
        </li>
        <li>
          <a class="p-navigation__dropdown-item" href="/blog" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Blog' });">Blog</a>
        </li>
      </ul>
    </li>
    <li class="p-navigation__item">
      <a class="p-navigation__link" href="https://discourse.maas.io" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Main navigation' , 'eventAction' : 'Click' , 'eventLabel' : 'Discourse' });">Forum</a>
    </li>
  </ul>
</nav>
{% endmacro %}

<header id="navigation" class="p-navigation">
  {% if is_docs %}
  <div class="l-docs__subgrid">
    <div class="l-docs__sidebar">
      {{ nav_logo() }}
    </div>
    <div class="l-docs__main">
      <div class="p-navigation__row u-fixed-width">
        {{ nav_items() }}
      </div>
    </div>
  </div>
  {% else %}
    <div class="row">
      <div class="col-3">
        {{ nav_logo() }}
      </div>
      <div class="col-9">
        {{ nav_items() }}
      </div>
    </div>
  {% endif %}
</header>
